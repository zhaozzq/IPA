<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"></meta>
    <title>应用下载</title>
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <style type="text/css">
      #container {
        padding: 50px;
        background-color: #FFF;
      }
      #container div {
        text-align: center;
      }
    </style>
  </head>

  <body>
    <div id="container"></div>
    <script type="text/babel">

      function Square(props) {
        if (!props.color) {
          props.color = "#EEE"
        }
        const squareStyle = {
          height: 120,
          backgroundColor: props.color
        };
        const imgStyle = {
          width: 100,
          height: 100,
        };
        return (
          <div style={squareStyle}>
            <img style={imgStyle} src={props.image}/>
          </div>
        );
      }

      function Label(props) {

        const labelStyle = {
          fontFamily: "sans-serif",
          fontWeight: "bold",
          margin: 0,
          textAlign: "center",
        };
        return (
          <div style={labelStyle}>
            <p>{props.appName}</p>
          </div>
        );
      }

      class Card extends React.Component {
        handleClick(url){
          // window.open(url);
          window.location = 'itms-services://?action=download-manifest&url=' + url;
        };
        render() {
          const cardStyle = {
            height: 180,
            width: 150,
            margin: 20,
            backgroundColor: "#FFF",
            WebkitFilter: "drop-shadow(0px 0px 5px #666)",
            cursor: "pointer",
            display: "inline-block",
          };
          return (
            <div style={cardStyle} onClick={this.handleClick.bind(this,this.props.url)}>
              <Square color={this.props.color} image={this.props.image}/>
              <Label appName={this.props.appName}/>
            </div>
          );
        }
      };
      ReactDOM.render(
        <div>
          <Card color="#FF6663" appName="汇盈金服"
            url="https://coding.net/u/zhaozq/p/ipa/git/raw/master/hyjf/manifest.plist"
            image="https://coding.net/u/zhaozq/p/ipa/git/raw/master/hyjf/512.png"
          />
          <Card color="#FF6663" appName="Octobook"
            url="https://coding.net/u/zhaozq/p/ipa/git/raw/master/Octobook/manifest.plist"
            image="https://coding.net/u/zhaozq/p/ipa/git/raw/master/Octobook/512.png"
          />
        </div>,
        document.querySelector("#container")
      );
    </script>
  </body>
</html>
